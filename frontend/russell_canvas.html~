<html>
<head>  

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
  <script type="text/javascript">


function sortResults(node,prop, asc) {
    node = node.sort(function(a, b) {
        if (asc) return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
        else return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
    });
    
}

  window.onload = function () {
    var chart = new CanvasJS.Chart("chartContainer",
    {
      zoomEnabled: true,
      animationEnabled: true,
      title:{
       text: ""
     },height:500,
     axisX: {
      title:"Valance",
      maximum: 50,
      minimum: -50,
      stripLines:[
      {                
	value:0
      }],lineThickness:0,gridThickness:0		

    },
    axisY: {
      title:"Arousal",
      maximum: 50,
      minimum: -50,
      stripLines:[
      {                
	value:0
      }],lineThickness:0,gridThickness:0			
    },

    legend:{
      verticalAlign: "bottom",
      horizontalAlign: "left"

    },
    data: [
    {        
      type: "scatter", 
      legendText: "Size of Bubble Represents Population",
      showInLegend: true,
      legendMarkerType: "circle",
      markerColor:"#4682B4",
      legendMarkerColor: "grey",
      toolTipContent: "<span style='\"'color: {color};'\"'><strong>{name}</strong></span><br/><strong>Arousal</strong> {x}<br/> <strong>Valance</strong> {y}<br/><p><img src='\"'{imgurl}'\"' width=50 height=50></img></p><div id=tag_list>{tags}</div>",
dataPoints: [      
	
       ]
     }
     ]
   });


	/*
$.ajax({
            type: "GET",
            url: "http://192.168.2.84:8080/photos/by-emotion/sleepy",
            dataType: "jsonp", 
            success: function(data){
		alert(data);
                //for (var i = 0,len = data.products.length; i < len; i++) {
                //    var name = data.products[i].name;
                //    $('<div class="name" id="item_'+i+'"></div>').html(name).appendTo('#container');                        
                //}
            },
            error : function(data){
                      alert(data);
                     }
        });*/


obj=jQuery.parseJSON("[{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/d49d62efcae140c1973abc221c916c9f.jpg\",\"score\":0.4768772764081197,\"arousal\":3.025621270768399,\"valence\":-3.7730110475603396,\"tags\":[\"indoors\",\"auto post production filter\",\"transfer print\",\"window\",\"home interior\",\"wall\",\"door\",\"glass - material\",\"domestic room\",\"transparent\",\"wall - building feature\",\"simplicity\",\"mirror\",\"open\",\"glass\",\"contemporary\",\"home\",\"urban\",\"control\",\"context\"]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/da6c44402f524d199c46e2a8bb91002f.jpg\",\"score\":null,\"arousal\":1.7078523938041084,\"valence\":-1.8599924321254955,\"tags\":[]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/db2419c6dd4048d194a32079583cac02.jpg\",\"score\":null,\"arousal\":4.735704994983754,\"valence\":-2.4298232716897705,\"tags\":[]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/db760fb6a51c4ec7be17341d636aa412.jpg\",\"score\":null,\"arousal\":2.959759108890607,\"valence\":-0.4792881072550603,\"tags\":[]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/df62953fb1c54e75ba18772f7f9d27be.jpg\",\"score\":null,\"arousal\":1.6469492094437408,\"valence\":4.519850142106419,\"tags\":[]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/e42b25772dc647eba143c1851f2a0855.jpg\",\"score\":0.13211162367756746,\"arousal\":3.444676973274401,\"valence\":2.1028685443174187,\"tags\":[\"auto post production filter\",\"transfer print\",\"indoors\",\"window\",\"home interior\",\"sitting\",\"lifestyles\",\"glass - material\",\"real node\",\"front view\",\"young adult\",\"transparent\",\"waist up\",\"young men\",\"contemplation\",\"alone\",\"lifestyles\",\"person\",\"togetherness\"]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/e4e2ccbbd9264814b9b00f9276ef63d4.jpg\",\"score\":6.84715511684697E-4,\"arousal\":0.6721636142156884,\"valence\":2.3265717387676244,\"tags\":[\"indoors\",\"window\",\"home interior\",\"auto post production filter\",\"transfer print\",\"wall\",\"glass - material\",\"transparent\",\"door\",\"glass\",\"curtain\",\"wall - building feature\",\"domestic room\",\"one person\",\"open\",\"occupation\",\"home\",\"contemporary\",\"business\",\"contemplation\"]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/e6eed5e5e21e4b1eb2bd5caf43afdc62.jpg\",\"score\":null,\"arousal\":2.5847602446277627,\"valence\":-3.8501006128127524,\"tags\":[]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/e928220e89064ee2bee606188980a362.jpg\",\"score\":0.04515108805863233,\"arousal\":4.281137677175774,\"valence\":-4.971198178949267,\"tags\":[\"indoors\",\"auto post production filter\",\"transfer print\",\"home interior\",\"sitting\",\"window\",\"lifestyles\",\"casual clothing\",\"real node\",\"young adult\",\"young men\",\"togetherness\",\"front view\",\"waist up\",\"occupation\",\"happiness\",\"contemplation\",\"confidence\",\"togetherness\"]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/f5c07a5c9e6349f3a9cded6198726c5b.jpg\",\"score\":null,\"arousal\":0.07505245347636968,\"valence\":4.544704306403601,\"tags\":[]},{\"imageUrl\":\"https://app-cdnandbuckets-privatebucket-1nx6pcmahiqo5.s3.amazonaws.com/private/users/b925c35377f548e890be5befb84cb572/renders/g1_hd/f9422f981f43486e8a7918de30d6bc17.jpg\",\"score\":0.0291126349634776,\"arousal\":-0.1825140685129707,\"valence\":1.7141033685764722,\"tags\":[\"indoors\",\"window\",\"home interior\",\"auto post production filter\",\"transfer print\",\"sitting\",\"glass - material\",\"door\",\"lifestyles\",\"young adult\",\"real node\",\"transparent\",\"wall\",\"casual clothing\",\"occupation\",\"happiness\",\"business\",\"confidence\",\"home\"]}]");


sortResults(obj,"arousal",false);


	rank=0
	content=""

$.each(obj, function(i, item) {
	rank++;
	tags_json=item.tags
	tags_str="";
	$.each(tags_json,function(j,tag){
	tags_str+="#"+tag+"<br>"
	});
	chart.options.data[0].dataPoints.push({x:item.arousal*10,y:item.valence*10,z:1,name:"Photo "+i,imgurl:item.imageUrl,tags:tags_str});  
	//$("#expressive_pics").html("hi")

	if(rank<10)
		content+="<p><img src="+item.imgurl+">:"+Math.floor(item.arousal)+"<p>"

	
	

});

	$("#expressive_pics").html(content)
//document.writeln(obj[0].imageUrl);

// draw the emotions
emotions=new Array(["pleased","excited","aroused","distressed","miserable","depressed","sleepy","relaxed"]);



chart.render();


/*
//{ x: 64.8, y: 2.66, z:12074.4 , name: "India"},
       //  { x: 73.1, y: 1.61, z:13313.8, name: "China"},
       { x: 78.1, y: 2.00, z:306.77, name: "US" },
       { x: 68.5, y: 2.15, z: 237.414, name: "Indonesia"},
       { x: 72.5, y: 1.86, z: 193.24, name: "Brazil"},
       { x: 76.5, y: 2.36, z: 112.24, name: "Mexico"},
       { x: 50.9, y: 5.56, z: 154.48, name: "Nigeria"},
       { x: 68.6, y: 1.54, z:141.91, name: "Russia" },

       { x: 82.9, y: 1.37, z:127.55, name: "Japan" },         
       { x: 79.8, y: 1.36, z:81.90, name:"Australia" },
       { x: 72.7, y: 2.78, z: 79.71, name: "Egypt"},    
       { x: 80.1, y: 1.94, z:61.81, name:"UK" },
       { x: 55.8, y: 4.76, z: 39.24, name: "Kenya"},
       { x: 81.5, y: 1.93, z:21.95, name:"Australia" },
       { x: 68.1, y: 4.77, z: 31.09, name: "Iraq"},
       { x: 47.9, y: 6.42, z: 33.42, name: "Afganistan"},
       { x: 50.3, y: 5.58, z: 18.55, name: "Angola"}
*/


}





</script>
<script type="text/javascript" src="assets/canvasjs.min.js"></script>
</head>
<body>


	
  <div id="chartContainer" style="height: 300px; width: 100%;">
  </div>

  <div id="expressive_pics">
  </div>
<!--
<script language="javascript">
$('.tlcontainer').simpleTimeline({

content: $('div.tlcontainer'),
hoverTrans: {
  trans: 'fadeToggle',
  transIn: 300,
  transOut: 300,
},
startDate: 1,
months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']

});

</script>!-->
<script src="assets/simple-timeline.jquery.js"></script>


</body>
</html>

